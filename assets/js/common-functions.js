window._Common={appUrl:"http://app.hotsitestore.com.br",siteUrl:"http://www.hotsitestore.com.br",init:function(){_Common.loader();_Common.activePageLink();_Common.logout();$(document.body).is(".home")?_Home.init():$(document.body).is(".my-hotsites")&&_MyHotsites.init()},loader:function(){var a=$("body >.progress");$(document).ajaxStart(function(){a.show().addClass("active")});$(document).ajaxStop(function(){a.hide().removeClass("active")})},ajaxAuthErrorMsg:function(a){var b={type:"danger",timer:4E3,
placement:{from:"top",align:"center"}};401==a.status?$(".modal-login").modal({backdrop:"static",keyboard:!1}):a.responseJSON?$.notify({icon:"error",message:"Ocorreu um erro. Detalhes: <b>\u201c"+a.responseJSON.error+"\u201d</b>"},b):$.notify({icon:"error",message:"Ocorreu um erro. Me desculpe!"},b)},activePageLink:function(){var a=$(".sidebar");a.find("li").removeClass("active");var b=!1;a.find("a").each(function(){var a=$(this);if(-1<location.pathname.toLowerCase().indexOf((a.attr("href")||"").toLowerCase()))return a.closest("li").addClass("active"),
b=!0,!1});b||(-1<location.pathname.toLowerCase().indexOf("/template/")?a.find('a[href*="new_hotsites.html"]').closest("li").first().addClass("active"):a.find('a[href*="index.html"]').closest("li").first().addClass("active"))},logout:function(){$(".fn-logout").click(function(){Cookies.remove("hs-account",{path:"/"});Cookies.remove("hs-session",{path:"/"});location.href=_Common.siteUrl})}};
window._Home={init:function(){_Home.getUserAccount()},getUserAccount:function(){$.ajax({url:_Common.appUrl+"/api-v1/user/my/account/",headers:{"x-hs-session-token":Cookies.get("hs-session")},dataType:"json"}).done(function(a){var b=$(".user-account-form");b.find('[name="email"]').val(a.email).change().keyup().focusout();b.find('[name="fullName"]').val(a.fullName).change().keyup().focusout();b.find('[name="mainDomain"]').val(a.mainDomain).change().keyup().focusout();b.find('[name="vtexStore"]').val(a.vtexStore).change().keyup().focusout()}).fail(_Common.ajaxAuthErrorMsg)}};
window._MyHotsites={init:function(){_MyHotsites.listHotsites()},listHotsites:function(){$.ajax({url:_Common.appUrl+"/api-v1/user/my/templates/",headers:{"x-hs-session-token":Cookies.get("hs-session")},dataType:"json"}).done(function(a){for(var b=[],c=0;c<a.length;c++)b.push($.extend({},hsGlobalConfig,a[c]));a=Handlebars.compile($("#template-block").html());$("#template-block").before(a({templates:b}))}).fail(_Common.ajaxAuthErrorMsg)}};$(_Common.init);